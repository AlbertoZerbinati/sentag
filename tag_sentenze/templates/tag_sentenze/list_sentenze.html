{% extends "tag_sentenze/layout.html" %}

{% block title %}
    Scegli sentenza
{% endblock %}

{% block content %}
    <h2 class="title">Scegli sentenza</h2>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Judgment</th>
                <th>For Taggers</th>
                <th>For Editors</th>
            </tr>
        </thead>
        <tbody>
            {% for sentenza in sentenze %}
            <tr>
                <td>{{sentenza}}</td>
                <td><a href="{% url 'tag_sentenze:tag-sentenza' sentenza.id %}"> TAG </a> </td>
                <td><button class="btn btn-secondary" onclick="download()"> DOWNLOAD xml</button> </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        function download() {
            const filename = "training_data.json";
            const output = {
                "classes": "weee",
                "annotations": "yoooo"
            }
            const jsonStr = JSON.stringify(output);

            let element = document.createElement("a");
            element.setAttribute(
                "href",
                "data:text/plain;charset=utf-8," + encodeURIComponent(jsonStr)
            );
            element.setAttribute("download", filename);

            element.style.display = "none";
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
    </script>
{% endblock %}